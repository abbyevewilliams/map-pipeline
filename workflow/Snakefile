# =================================================================================================
#     Setup
# =================================================================================================

# Packages
import pandas as pd
import os

# Point to config file
configfile: "config/config.yaml"

# Read in sample names
with open(config["samples"]) as f:
    SAMPLES = [line.strip() for line in f]

# State reads
READS = ['1', '2']

# =================================================================================================
#     Default "All" Target Rule
# =================================================================================================

# This rule requests that other rules be run.

rule all:
    input:
        expand("results/fastqc_initial/{sample}_R{read}_fastqc.html", sample=SAMPLES, read=READS),
        expand("results/trimmed/{sample}.collapsed.trimmed.fastq.gz", sample=SAMPLES),
        expand("results/fastqc_post_trim/{sample}_collapsed_fastqc.html", sample=SAMPLES),
        expand("results/dedup/{sample}.bam", sample=SAMPLES),
        expand("results/mapdamage/{sample}/Runtime_log.txt", sample=SAMPLES),
        expand("results/dedup/{sample}.stats", sample=SAMPLES),
        expand("results/dedup/{sample}.depth", sample=SAMPLES)

localrules:
    all

# =================================================================================================
#     Rule Modules
# =================================================================================================

include: "rules/clean.smk"
include: "rules/map.smk"
include: "rules/damage.smk"